<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="ios-header-container mb-8">
    <div class="ios-header-backdrop">
      <div class="ios-header-content">
        <div class="ios-header-text">
          <div class="ios-header-icon">
            <i class="fas fa-layer-group"></i>
          </div>
          <div>
            <h1 class="ios-header-title">Tipos de Empresa</h1>
            <p class="ios-header-subtitle">Gestiona categorias, reglas y caracteristicas</p>
          </div>
        </div>
        <div class="ios-header-actions">
          <button class="ios-action-btn ios-action-btn-primary" type="button" onclick="openCreateCompanyTypeModal()">
            <i class="fas fa-plus"></i>
            <span>Nuevo Tipo</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="ios-stats-grid">
    <div class="ios-stat-card" data-stat="total">
      <div class="ios-stat-icon ios-stat-icon-blue">
        <i class="fas fa-layer-group"></i>
      </div>
      <div class="ios-stat-content">
        <div class="ios-stat-label">Total Tipos</div>
        <div class="ios-stat-value" id="companyTypesTotalCount">0</div>
        <div class="ios-stat-trend">Categorias registradas</div>
      </div>
      <div class="ios-stat-shimmer"></div>
    </div>

    <div class="ios-stat-card" data-stat="active">
      <div class="ios-stat-icon ios-stat-icon-green">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="ios-stat-content">
        <div class="ios-stat-label">Activos</div>
        <div class="ios-stat-value" id="companyTypesActiveCount">0</div>
        <div class="ios-stat-trend">Operativos</div>
      </div>
      <div class="ios-stat-shimmer"></div>
    </div>

    <div class="ios-stat-card" data-stat="companies">
      <div class="ios-stat-icon ios-stat-icon-purple">
        <i class="fas fa-building"></i>
      </div>
      <div class="ios-stat-content">
        <div class="ios-stat-label">Empresas Totales</div>
        <div class="ios-stat-value" id="companyTypesCompaniesCount">0</div>
        <div class="ios-stat-trend">Asignadas</div>
      </div>
      <div class="ios-stat-shimmer"></div>
    </div>

    <div class="ios-stat-card" data-stat="average">
      <div class="ios-stat-icon ios-stat-icon-orange">
        <i class="fas fa-chart-bar"></i>
      </div>
      <div class="ios-stat-content">
        <div class="ios-stat-label">Promedio por Tipo</div>
        <div class="ios-stat-value" id="companyTypesAverageCount">0</div>
        <div class="ios-stat-trend">Distribucion</div>
      </div>
      <div class="ios-stat-shimmer"></div>
    </div>
  </div>

  <div class="ios-filters-container ios-blur-bg mb-8" id="companyTypesFilters">
    <div class="ios-filters-grid">
      <div class="ios-filter-item">
        <label class="ios-filter-label" for="companyTypesSearchInput">Buscar</label>
        <input id="companyTypesSearchInput" type="text" class="ios-filter-input" placeholder="Nombre o descripcion">
      </div>
      <div class="ios-filter-item">
        <label class="ios-filter-label" for="companyTypesStatusFilter">Estado</label>
        <select id="companyTypesStatusFilter" class="ios-filter-input">
          <option value="active">Solo activos</option>
          <option value="inactive">Solo inactivos</option>
          <option value="all">Todos</option>
        </select>
      </div>
      <div class="ios-filter-item flex items-end">
        <button class="ios-action-btn w-full" type="button" onclick="clearCompanyTypeFilters()">
          <i class="fas fa-filter-circle-xmark"></i>
          Limpiar
        </button>
      </div>
    </div>
  </div>

  <section id="companyTypesGrid" class="ios-hardware-grid mt-10" aria-label="Listado de tipos de empresa">
    <div id="companyTypesEmpty" class="col-span-full hidden text-center py-16">
      <i class="fas fa-layer-group text-4xl text-gray-400 mb-4"></i>
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">No hay tipos disponibles</h3>
      <p class="text-gray-600 dark:text-gray-300">Crea el primer tipo de empresa para comenzar.</p>
    </div>
  </section>
</div>

<div id="companyTypeModal" class="ios-modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="companyTypeModalTitle">
  <div class="ios-blur-modal-container flex flex-col w-full max-w-3xl sm:max-w-4xl lg:max-w-5xl xl:max-w-6xl !max-h-[92vh] sm:!max-h-[90vh] overflow-hidden">
    <div class="ios-blur-header">
      <div class="flex flex-col items-start gap-4 w-full sm:flex-row sm:items-center sm:justify-between">
        <div class="flex items-center gap-3 flex-1 min-w-0">
          <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
            <i class="fas fa-layer-group text-gray-900 dark:text-white text-xl"></i>
          </div>
          <div class="min-w-0">
            <h2 id="companyTypeModalTitle" class="text-2xl font-bold text-gray-900 dark:text-white">Nuevo tipo de empresa</h2>
            <p class="text-sm text-gray-600 dark:text-gray-300" id="companyTypeModalSubtitle">Define las caracteristicas principales</p>
          </div>
        </div>
        <button type="button" class="ios-blur-btn ios-blur-btn-secondary shrink-0 !p-2 !min-w-0" onclick="closeCompanyTypeModal()" aria-label="Cerrar modal">
          <i class="fas fa-times text-lg"></i>
        </button>
      </div>
    </div>

    <div class="ios-blur-body flex-1 min-h-0 !max-h-none">
      <form id="companyTypeForm" class="space-y-6">
        <div id="companyTypeFormFeedback" class="hidden px-4 py-3 rounded-lg border border-red-400 bg-red-500/20 text-red-100 text-sm"></div>

        <div class="form-grid">
          <div class="form-group">
            <label for="companyTypeName" class="block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">Nombre *</label>
            <input type="text" id="companyTypeName" class="ios-blur-input" placeholder="Ej. Industrial" maxlength="40" required>
          </div>
          <div class="form-group">
            <label for="companyTypeStatus" class="block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">Estado</label>
            <select id="companyTypeStatus" class="ios-blur-input" required>
              <option value="true">Activo</option>
              <option value="false">Inactivo</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="companyTypeDescription" class="block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">Descripcion *</label>
          <textarea id="companyTypeDescription" class="ios-blur-input" rows="3" placeholder="Describe el tipo de empresa" maxlength="160" required></textarea>
        </div>

        <div class="form-group">
          <label for="companyTypeFeatureInput" class="block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">Caracteristicas</label>
          <div class="ios-chip-input">
            <input type="text" id="companyTypeFeatureInput" class="ios-blur-input" placeholder="Ej. Operacion 24/7">
            <button type="button" class="ios-blur-btn ios-blur-btn-primary !p-2 !min-w-0" id="companyTypeFeatureAddBtn">
              <i class="fas fa-plus"></i>
              <span class="text-sm font-medium">Agregar</span>
            </button>
          </div>
          <p class="ios-chip-helper">Agrega caracteristicas una por una.</p>
          <div id="companyTypeFeaturesList" class="ios-chip-container"></div>
        </div>
      </form>
    </div>

    <div class="ios-blur-footer flex flex-col sm:flex-row gap-3 sm:justify-end">
      <button type="button" class="ios-blur-btn ios-blur-btn-secondary" onclick="closeCompanyTypeModal()">
        <i class="fas fa-times mr-2"></i>
        <span class="text-sm font-medium">Cancelar</span>
      </button>
      <button type="submit" form="companyTypeForm" class="ios-blur-btn ios-blur-btn-primary" id="companyTypeSubmitBtn">
        <i class="fas fa-save mr-2"></i>
        <span class="text-sm font-medium" id="companyTypeSubmitText">Guardar tipo</span>
      </button>
    </div>
  </div>
</div>

<div id="viewCompanyTypeModal" class="ios-modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="viewCompanyTypeTitle">
  <div class="ios-blur-modal-container max-w-3xl">
    <div class="ios-blur-header">
      <div class="flex items-center justify-between w-full">
        <div class="flex items-center space-x-3">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 via-purple-500 to-pink-400 flex items-center justify-center shadow-lg">
            <i class="fas fa-eye text-white text-xl"></i>
          </div>
          <div>
            <h2 id="viewCompanyTypeTitle" class="text-2xl font-semibold text-white">Detalle del tipo</h2>
            <p class="text-sm text-white/70">Consulta la configuracion completa</p>
          </div>
        </div>
        <button type="button" class="ios-blur-btn ios-blur-btn-secondary !p-2" onclick="closeViewCompanyTypeModal()" aria-label="Cerrar modal">
          <i class="fas fa-times text-lg"></i>
        </button>
      </div>
    </div>

    <div class="ios-blur-body space-y-6">
      <div>
        <h3 class="text-xl font-bold text-white" id="viewCompanyTypeName">-</h3>
        <p class="text-sm text-white/70" id="viewCompanyTypeDescription">-</p>
      </div>

      <dl class="ios-card-info">
        <div class="ios-info-item">
          <dt class="ios-info-label"><i class="fas fa-check-circle"></i> Estado</dt>
          <dd class="ios-info-value" id="viewCompanyTypeStatus">-</dd>
        </div>
        <div class="ios-info-item">
          <dt class="ios-info-label"><i class="fas fa-building"></i> Empresas</dt>
          <dd class="ios-info-value" id="viewCompanyTypeCompanies">-</dd>
        </div>
        <div class="ios-info-item">
          <dt class="ios-info-label"><i class="fas fa-calendar"></i> Creacion</dt>
          <dd class="ios-info-value" id="viewCompanyTypeCreated">-</dd>
        </div>
      </dl>

      <div>
        <p class="text-sm font-semibold text-white mb-2"><i class="fas fa-tags mr-2"></i>Caracteristicas</p>
        <ul id="viewCompanyTypeFeatures" class="text-sm text-white/80 space-y-1"></ul>
      </div>
    </div>

    <div class="ios-blur-footer">
      <button type="button" class="ios-blur-btn ios-blur-btn-secondary" onclick="closeViewCompanyTypeModal()">
        <i class="fas fa-times mr-2"></i>
        Cerrar
      </button>
    </div>
  </div>
</div>

<div id="toggleCompanyTypeModal" class="ios-modal-backdrop toggle-modal hidden" role="dialog" aria-modal="true" aria-labelledby="toggleCompanyTypeTitle">
  <div class="ios-blur-modal-container max-w-md" id="toggleCompanyTypeContainer">
    <div class="ios-blur-header text-center">
      <div class="toggle-modal-icon deactivate mx-auto mb-4" id="toggleCompanyTypeIcon">
        <i class="fas fa-pause-circle text-4xl" id="toggleCompanyTypeIconFa"></i>
      </div>
      <h2 id="toggleCompanyTypeTitle" class="text-2xl font-semibold text-white">Desactivar tipo</h2>
    </div>

    <div class="ios-blur-body space-y-6">
      <p class="text-white/80 text-lg text-center" id="toggleCompanyTypeMessage">Estas seguro de que quieres desactivar este tipo?</p>
      <div id="companyTypeToggleFeedback" class="hidden px-4 py-3 rounded-lg border border-red-400 bg-red-500/20 text-red-100 text-sm"></div>
    </div>

    <div class="ios-blur-footer">
      <button type="button" class="ios-blur-btn ios-blur-btn-secondary" onclick="closeToggleCompanyTypeModal()">
        <i class="fas fa-times mr-2"></i>
        Cancelar
      </button>
      <button type="button" class="ios-blur-btn ios-blur-btn-primary" id="companyTypeToggleConfirmBtn" onclick="confirmToggleCompanyType()">
        <i class="fas fa-power-off mr-2" id="companyTypeToggleConfirmIcon"></i>
        <span id="companyTypeToggleConfirmText">Desactivar</span>
      </button>
    </div>
  </div>
</div>

<div id="clientUpdateModal" class="ios-modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="companyTypeUpdateTitle">
  <div class="ios-blur-modal-container max-w-md" id="updateModalContainer">
    <div class="ios-blur-header text-center">
      <div class="client-update-icon mx-auto mb-4" id="companyTypeUpdateIcon">
        <i class="fas fa-check-circle text-4xl text-emerald-400" id="companyTypeUpdateIconFa"></i>
      </div>
      <h3 class="text-2xl font-bold text-white mb-2" id="companyTypeUpdateTitle">Tipo Actualizado</h3>
    </div>
    <div class="ios-blur-body text-center">
      <p class="text-white/80 text-lg mb-6" id="companyTypeUpdateMessage">El tipo de empresa se ha actualizado exitosamente.</p>
      <button class="ios-blur-btn ios-blur-btn-primary mx-auto" type="button" onclick="closeCompanyTypeUpdateModal()">
        <i class="fas fa-check mr-2"></i>
        <span class="text-sm font-medium">Aceptar</span>
      </button>
    </div>
  </div>
</div>
