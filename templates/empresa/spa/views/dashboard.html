<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 dashboard-main-container">
  <div class="ios-header-container mb-8">
    <div class="ios-header-backdrop">
      <div class="ios-header-content">
        <div class="ios-header-text">
          <div class="ios-header-icon">
            <span class="text-white font-bold text-2xl">{{ dashboard_summary.empresa.nombre[:2].upper() }}</span>
          </div>
          <div>
            <h1 class="ios-header-title">¡Bienvenido!</h1>
            <p class="ios-header-subtitle">Panel de Control Empresarial • {{ dashboard_summary.empresa.nombre }}</p>
          </div>
        </div>
        <div class="ios-header-actions">
          <div class="ios-status-badge {% if dashboard_summary.empresa.activa %}ios-status-available{% else %}ios-status-stock{% endif %}">
            <i class="fas {% if dashboard_summary.empresa.activa %}fa-check-circle{% else %}fa-times-circle{% endif %}"></i>
            <span>{% if dashboard_summary.empresa.activa %}ACTIVA{% else %}INACTIVA{% endif %}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mb-8">
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
      <i class="fas fa-tachometer-alt mr-2 text-blue-400"></i>
      KPIs Principales
    </h3>
    <div class="ios-stats-grid">
      <div class="ios-stat-card gsap-animated">
        <div class="ios-stat-icon ios-stat-icon-blue">
          <i class="fas fa-users"></i>
        </div>
        <div class="ios-stat-content">
          <div class="ios-stat-label">Total Usuarios</div>
          <div class="ios-stat-value">{{ dashboard_summary.kpis.usuarios_total }}</div>
          <div class="ios-stat-trend">{{ dashboard_summary.kpis.usuarios_activos }} activos</div>
        </div>
        <div class="ios-stat-shimmer"></div>
      </div>

      <div class="ios-stat-card gsap-animated">
        <div class="ios-stat-icon ios-stat-icon-green">
          <i class="fas fa-microchip"></i>
        </div>
        <div class="ios-stat-content">
          <div class="ios-stat-label">Hardware Total</div>
          <div class="ios-stat-value">{{ dashboard_summary.kpis.hardware_total }}</div>
          <div class="ios-stat-trend">dispositivos</div>
        </div>
        <div class="ios-stat-shimmer"></div>
      </div>

      <div class="ios-stat-card gsap-animated">
        <div class="ios-stat-icon ios-stat-icon-red">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="ios-stat-content">
          <div class="ios-stat-label">Alertas Activas</div>
          <div class="ios-stat-value">{{ dashboard_summary.kpis.alertas_activas }}</div>
          <div class="ios-stat-trend">pendientes</div>
        </div>
        <div class="ios-stat-shimmer"></div>
      </div>

      <div class="ios-stat-card gsap-animated">
        <div class="ios-stat-icon ios-stat-icon-purple">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="ios-stat-content">
          <div class="ios-stat-label">Estado General</div>
          <div class="ios-stat-value">OK</div>
          <div class="ios-stat-trend">sistema operativo</div>
        </div>
        <div class="ios-stat-shimmer"></div>
      </div>
    </div>
  </div>

  <div class="mb-8">
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
      <i class="fas fa-rocket mr-2 text-purple-400"></i>
      Acceso Rápido
    </h3>
    <div class="ios-hardware-grid">
      {% for item in dashboard_summary.quick_access %}
      {% set spa_view = 'usuarios' if item.url == 'empresa_usuarios' else 'stats' if item.url == 'empresa_stats' else '' %}
      <a href="{{ url_for(item.url) if not spa_view else '#' }}" class="ios-hardware-card gsap-animated" {% if spa_view %}data-spa-view="{{ spa_view }}"{% endif %}>
        <div class="ios-card-header">
          <div class="ios-card-icon">
            <i class="{{ item.icon }}"></i>
          </div>
          <div class="ios-status-badge ios-status-available">
            <i class="fas fa-check"></i>
            <span>Disponible</span>
          </div>
        </div>
        <div class="ios-card-body">
          <h4 class="ios-card-title">{{ item.name }}</h4>
          <p class="ios-card-subtitle">{{ item.description }}</p>
        </div>
        <div class="ios-card-shimmer"></div>
      </a>
      {% endfor %}

      <div class="ios-hardware-card gsap-animated" data-dashboard-action="system-info">
        <div class="ios-card-header">
          <div class="ios-card-icon" style="background: linear-gradient(135deg, #10b981, #047857);">
            <i class="fas fa-info-circle"></i>
          </div>
          <div class="ios-status-badge ios-status-available">
            <i class="fas fa-info"></i>
            <span>Sistema</span>
          </div>
        </div>
        <div class="ios-card-body">
          <h4 class="ios-card-title">Información del Sistema</h4>
          <p class="ios-card-subtitle">Ver detalles técnicos y estado del sistema</p>
        </div>
        <div class="ios-card-shimmer"></div>
      </div>
    </div>
  </div>

  <div class="text-center mt-8">
    <div class="inline-block px-6 py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20">
      <span class="text-gray-700 dark:text-white/80 text-sm">
        <i class="fas fa-building mr-2"></i>
        Panel Empresarial • {{ dashboard_summary.empresa.nombre }}
      </span>
    </div>
  </div>
</div>

<div id="systemInfoModal" class="ios-modal-backdrop hidden">
  <div class="ios-blur-modal-container">
    <div class="ios-blur-header">
      <div class="flex items-center gap-3 text-white">
        <div class="w-10 h-10 rounded-full bg-emerald-500/80 flex items-center justify-center">
          <i class="fas fa-info-circle"></i>
        </div>
        <div>
          <h3 class="text-lg font-semibold">Información del Sistema</h3>
          <p class="text-sm text-white/70">Resumen operativo del panel</p>
        </div>
      </div>
    </div>

    <div class="ios-blur-body">
      <div class="space-y-6 text-white/90">
        <section>
          <h4 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-3">
            <i class="fas fa-building mr-2"></i>
            Información Empresarial
          </h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between gap-4"><span>Empresa</span><span>{{ empresa_username }}</span></div>
            <div class="flex justify-between gap-4"><span>ID</span><span>{{ empresa_id }}</span></div>
            <div class="flex justify-between gap-4"><span>Rol</span><span>{{ user_role }}</span></div>
          </div>
        </section>

        <section>
          <h4 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-3">
            <i class="fas fa-chart-line mr-2"></i>
            Estadísticas Actuales
          </h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between gap-4"><span>Usuarios Total</span><span>{{ dashboard_summary.kpis.usuarios_total }}</span></div>
            <div class="flex justify-between gap-4"><span>Usuarios Activos</span><span>{{ dashboard_summary.kpis.usuarios_activos }}</span></div>
            <div class="flex justify-between gap-4"><span>Hardware Total</span><span>{{ dashboard_summary.kpis.hardware_total }}</span></div>
            <div class="flex justify-between gap-4"><span>Alertas Activas</span><span>{{ dashboard_summary.kpis.alertas_activas }}</span></div>
          </div>
        </section>

        <section>
          <h4 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-3">
            <i class="fas fa-cog mr-2"></i>
            Estado del Sistema
          </h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between gap-4"><span>KPIs Cargados</span><span id="kpisLoadedStatus">Verificando...</span></div>
            <div class="flex justify-between gap-4"><span>Última Actualización</span><span id="lastUpdateStatus">Ahora</span></div>
          </div>
        </section>
      </div>
    </div>

    <div class="ios-blur-footer flex justify-end">
      <button class="ios-blur-btn ios-blur-btn-secondary" data-dashboard-action="close-modal">
        <i class="fas fa-times mr-2"></i>
        Cerrar
      </button>
    </div>
  </div>
</div>

<script id="dashboardSummaryData" type="application/json">
{{ dashboard_summary | tojson }}
</script>
