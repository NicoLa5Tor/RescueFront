{% extends "base.html" %}
{% block title %}Iniciar Sesión - Sistema Multi-Tenant{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/login.css') }}" rel="stylesheet">
{% endblock %}

{% block navbar %}
<!-- Header minimalista para login -->
<header class="login-header-nav">
  <div class="login-header-content">
    <a href="{{ url_for('index') }}" class="login-brand">
      <i class="fas fa-building"></i>
      <span>Rescue</span>
    </a>
  </div>
</header>
{% endblock %}

{% block content %}
<div class="login-background">
  <!-- Partículas animadas -->
  <div class="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <!-- Contenedor principal -->
  <div class="login-container container">
    <div class="row login-wrapper justify-content-center align-items-center">
      <div id="loginInfo" class="col-12 col-md-6 login-info fade-in-up text-center text-md-start mb-4 mb-md-0">
        <div class="plane-wrapper">
          <svg id="planeSvg" width="180" height="60" viewBox="0 0 180 60">
            <path id="planePath" d="M10,50 Q90,0 170,50" />
          </svg>
          <i id="planeIcon" class="fas fa-paper-plane plane-icon"></i>
        </div>
        <h2 class="info-title">Bienvenido a <span id="infoHighlight">Rescue</span></h2>
        <p class="info-text">Accede para gestionar de forma segura tus recursos y empresas.</p>
      </div>
      <div class="col-12 col-md-6 login-content d-flex justify-content-center">
      <div id="loginCard" class="login-card fade-in-up">
        <!-- Header del formulario -->
        <div class="form-header">
          <div id="brandLogo" class="brand-logo fade-in-scale">
            <i class="fas fa-shield-alt"></i>
          </div>
          <h1 id="loginTitle" class="login-title fade-in-up">Bienvenido</h1>
          <p id="loginSubtitle" class="login-subtitle fade-in-up">Accede a tu cuenta</p>
        </div>

        <!-- Formulario -->
        <form id="loginForm" novalidate autocomplete="off">
          <!-- Usuario -->
          <div class="form-group fade-in-up">
            <label for="usuario" class="form-label">Usuario</label>
            <div class="input-container">
              <i class="input-icon fas fa-user"></i>
              <input 
                type="text" 
                id="usuario" 
                name="usuario"
                class="form-input"
                placeholder="Ingresa tu usuario"
                required
                autocomplete="username"
              >
            </div>
            <div class="error-message">
              <i class="fas fa-exclamation-circle"></i>
              <span>Por favor ingresa tu usuario</span>
            </div>
          </div>

          <!-- Contraseña -->
          <div class="form-group fade-in-up">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-container">
              <i class="input-icon fas fa-lock"></i>
              <input 
                type="password" 
                id="password" 
                name="password"
                class="form-input"
                placeholder="Ingresa tu contraseña"
                required
                autocomplete="current-password"
              >
            </div>
            <div class="error-message">
              <i class="fas fa-exclamation-circle"></i>
              <span>Por favor ingresa tu contraseña</span>
            </div>
          </div>

          <!-- Botón de envío -->
          <button type="submit" id="submitBtn" class="btn-primary fade-in-up">
            <i id="loginIcon" class="fas fa-sign-in-alt"></i>
            <span id="btnText">Iniciar Sesión</span>
            <div id="loadingSpinner" class="loading-spinner hidden"></div>
          </button>

          <!-- Contraseña olvidada -->
          <div class="forgot-password fade-in-up">
            <a href="#forgot">¿Olvidaste tu contraseña?</a>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="login-footer fade-in-up">
        <p>¿No tienes cuenta? <a href="#contact">Contacta al administrador</a></p>
      </div>
    </div>
  </div>
</div>

<!-- Contenedor de notificaciones -->
<div id="notificationContainer"></div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/login.js') }}"></script>
{% endblock %}

{% block footer %}{% endblock %}
